import{r as o,j as e,C as d,d as u,e as j,b as x,B as m,u as g,a as f,L as p}from"./index-B4xvOnNy.js";import{C as N,P as y,M as b}from"./ProgressBar-DtIsliQW.js";import{B as v}from"./bar-chart-3-CmuOy69Y.js";import{U as w}from"./user-BUJXkw_4.js";function C(s,a=[]){const[r,i]=o.useState({data:null,loading:!0,error:null}),t=o.useCallback(async()=>{i(n=>({...n,loading:!0,error:null}));try{const n=await s();i({data:n,loading:!1,error:null})}catch(n){i({data:null,loading:!1,error:n instanceof Error?n:new Error("Unknown error")})}},a);return o.useEffect(()=>{t()},[t]),{...r,refetch:t}}class E{constructor(a){this.testRepository=a}async execute(){return await this.testRepository.getAvailableTests()}}function T({test:s,progress:a=0,onStart:r}){const i=t=>{switch(t){case"easy":return"bg-green-100 text-green-800";case"medium":return"bg-yellow-100 text-yellow-800";case"hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs(d,{className:"overflow-hidden transition-shadow hover:shadow-lg",children:[e.jsx("div",{className:"aspect-video w-full overflow-hidden",children:e.jsx("img",{src:s.imageUrl,alt:s.title,className:"h-full w-full object-cover"})}),e.jsxs(u,{children:[e.jsx(j,{className:"line-clamp-2",children:s.title}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:s.description})]}),e.jsx(x,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between text-sm",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("span",{className:`inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ${i(s.difficulty)}`,children:s.difficulty}),e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(N,{className:"h-4 w-4 mr-1"}),s.duration," min"]}),e.jsxs("div",{className:"flex items-center text-gray-500",children:[e.jsx(v,{className:"h-4 w-4 mr-1"}),s.totalQuestions," preguntas"]})]})}),a>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Progreso"}),e.jsxs("span",{className:"font-medium",children:[Math.round(a),"%"]})]}),e.jsx(y,{value:a})]}),e.jsxs(m,{onClick:()=>r(s.id),fullWidth:!0,className:"mt-4",children:[a>0?"Continuar":"Comenzar"," Test"]})]})})]})}const h=new b,k=new E(h),U=()=>{const s=g(),{user:a}=f(),{data:r,loading:i,error:t}=C(()=>k.execute(),[]),n=async l=>{try{console.log("Iniciando navegación al test:",l);const c=await h.exists(l);if(console.log("¿El test existe?:",c),!c){console.error("El test no existe:",l);return}console.log("Navegando a:",`/test/${l}`),s(`/test/${l}`)}catch(c){console.error("Error al iniciar el test:",c)}};return i?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(p,{size:"lg",className:"mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Cargando dashboard..."})]})}):t?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx(d,{className:"max-w-md",children:e.jsxs(x,{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-4",children:t.message}),e.jsx(m,{onClick:()=>window.location.reload(),children:"Reintentar"})]})})}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-between items-center py-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"h-8 w-8 text-emerald-600 mr-3"}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Bienvenido, ",a==null?void 0:a.name,"!"]}),e.jsx("p",{className:"text-gray-600",children:"Continúa tu aprendizaje con los exámenes disponibles"})]})]})})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Exámenes Disponibles"}),e.jsx("p",{className:"text-gray-600",children:"Selecciona un examen para comenzar o continuar donde lo dejaste"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r==null?void 0:r.map(l=>e.jsx(T,{test:l,onStart:n},l.id))}),(r==null?void 0:r.length)===0&&e.jsx(d,{className:"text-center py-12",children:e.jsxs(x,{children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"No hay exámenes disponibles en este momento"}),e.jsx(m,{onClick:()=>window.location.reload(),children:"Actualizar"})]})})]})]})};export{U as DashboardPage};
